<!-- edit task modal -->
<app-edit-task
  *ngIf="edit"
  [taskView]="taskView"
  (close)="editTaskModal()"
></app-edit-task>

<app-modal (close)="closeModal()">
  <!-- confirm modal -->
  <div class="confirm modal" *ngIf="confirm">
    <div class="modal-wrapper">
      <h2 class="delete-heading">Delete this task?</h2>
      <p class="delete-info">
        Are you sure you want to delete the ‘{{ taskView.title }}’ task and its
        subtasks? This action cannot be reversed.
      </p>
      <div class="buttons">
        <button class="btn btn-delete" (click)="deleteTask()">Delete</button>
        <button class="btn btn-cancel" (click)="cancel()">Cancel</button>
      </div>
    </div>
  </div>

  <!-- taskview modal -->
  <div *ngIf="!confirm && !edit">
    <div class="task-view-wrapper">
      <div class="header-wrapper">
        <h2 class="heading">{{ taskView.title }}</h2>
        <div class="manage-task-dropdown">
          <button class="manage-task-btn" (click)="showManageTask()"></button>
          <div class="manage-task-dropdown-content display-none" #optionsbar>
            <button
              class="manage-task-dropdown-btn medium-grey"
              (click)="editTaskModal()"
            >
              Edit Task
            </button>
            <button
              class="manage-task-dropdown-btn red"
              (click)="showConfirm()"
            >
              Delete Task
            </button>
          </div>
        </div>
      </div>
      <div class="description">
        <p class="p-description">{{ taskView.description }}</p>
      </div>
      <div class="subtasks-container">
        <p class="input-heading">
          Subtasks ({{ subtasksCompletedCount }} of {{ subtasksCount }})
        </p>
        <label
          class="subtask"
          *ngFor="let subtask of taskView.subtasks"
          [ngClass]="subtask.completed ? 'checked' : ''"
        >
          <input
            [checked]="subtask.completed"
            type="checkbox"
            name="business"
            (click)="(subtask)"
          />
          {{ subtask.title }}
        </label>
      </div>
      <div class="status-container">
        <div class="input-info">
          <p class="input-heading">Current Status</p>
        </div>
        <div class="status-input" (click)="showDropdownStatus()">
          {{ activeColumn?.name }}
        </div>
        <div class="status-dropdown" #dropdown>
          <span
            class="dropdown-option"
            *ngFor="let column of taskView.columns"
            [attr.data-value]="column.id"
            (click)="getDataColumn($event)"
            >{{ column.name }}</span
          >
        </div>
      </div>
    </div>
  </div>
</app-modal>
